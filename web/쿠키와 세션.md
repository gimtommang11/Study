# 쿠키와 세션

### 쿠키와 세션의 등장배경

쿠키와 세션은 HTTP의 사용으로 나타났다. http의 특징으로는 두 가지가 있는데

- 비연결성 : 서버에서 한번 리스폰스를 보내면 바로 프론트와의 연결을 끊어버린다. 
- 무상태성 : 서버에 클라이언트의 상태를 저장하지 않는다

이런 특징 때문에 서버-클라이언트가 통신할 때,  서버에는 연결을 유지하지 않기 때문에 계속 인증을 해야하는 상황이 생긴다.



## 쿠키

클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 파일이다. 일정 시간동안 유지되어서 로그인 할 때 사용되며, 이름, 값, 만료날짜, 경로 정보가 들어있다.

클라이언트에 300개까지 쿠키를 저장할 수 있다.

쿠키는 서버에 요청을 할 때 자동으로 함께 전송된다

### 쿠키의 종류

쿠키는 HTTP Only Cookies와 Secure Cookies 가 있는데, 이는 클라이언트 보안성을 높이기 위해 등장하였다.

#### Http Only Cookies

브라우저에서 쿠키에 접근할 수 없도록 제한하여 JS 를 이용해서 쿠키를 탈취하는 CSS(Cross Site Scripting)을 예방한다.

쿠키 생성 코드에 HTTP Only 라는 접미사를 붙이면 된다.

이렇게 생성된 코드는 XSS 취약점 공격으로 담긴 값을 불러올 수 없다.



#### Secure Cookies

js가 아닌 네트워크를 감청해 쿠키를 가로체는것을 막기 위해 HTTPS 프로토콜을 사용하여 데이터를 암호화한다. 이때, 개발자의 부주의로 HTTP 를 통해 유출될 수 있는것을 방지하기 위해 사용한다.

쿠키 생성 코드에 secure라는 접미사를 붙이면 된다.



## 세션

일정 시간동안 같은 브라우저에서 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술이다. 

클라이언트가 리퀘스트를 보내면 서버의 엔진이 클라이언트에 유일한 ID를 부여하는데, 이것이 세션이다.

클라이언트에서는 이 세션을 쿠키에 저장한다.  그러면 리퀘스트를 보낼 때 자동으로 요청을 하기 때문에 서버에서 세션 아이디에 따른 처리를 할 수 있다. 

로그인 정보 유지를 할 때 사용된다.



### 차이점

세션은 서버, 쿠키는 클라이언트에 저장된다.

쿠키는 클라이언트에 저장하기 때문에 변질되거나 보안에 취약하다. 세션은 쿠키를 이용해서 sessiond만 저장하고 나머지는 서버에 저장하기 때문에 비교적 보안성이 좋다.

쿠키도 만료시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속 정보가 남아있을 수 있다. 만료시간을 넉넉히 잡아두면 쿠키를 삭제할 때 까지 유지 할 수 있다.

세션은 만료시간을 정할수는 있지만 브라우저가 종료되면 바로 삭제된다.